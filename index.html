<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>Class 12 T</title>
    <link href='https://fonts.googleapis.com/css?family=Bungee Outline' rel='stylesheet'/>
    <link href='https://fonts.googleapis.com/css?family=Varela Round' rel='stylesheet'/>
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-database.js"></script>
    <style>
        body {
            background-color: #fff;
            font-family: 'Bungee Outline', cursive;
            font-weight: 900;
            overflow: hidden;
            animation: blur 0.5s ease-out;
        }

        * {
            outline: none;
            border: none;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }

        #title_container {
            width: 100%;
            height: 225px;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #D64045;
            border-bottom: 5px solid #fff;
            box-shadow: 0 0 30px -18px #D64045;
        }

        #title_inner_container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 200px;
        }

        #title {
            display: inline-block;
            color: #fff;
            font-size: 55px;
            letter-spacing: 2px;
            user-select: none;
        }

        #join_container {
            width: 100%;
            height: 200px;
            display: flex;
            justify-content: center;
            align-items: center;
            float: left;
            margin-top: 80px;
        }

        #join_inner_container {
            width: 50%;
            height: 100%;
        }

        #join_input_container {
            width: 100%;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            float: left;
        }

        #join_input {
            width: 60%;
            height: 40px;
            color: #1D3354;
            font-family: 'Varela Round', sans-serif;
            font-size: 15px;
            font-weight: bold;
            text-align: center;
            background-color: Transparent;
            border-bottom: 2px dashed #1D3354;
        }

        #join_input:focus {
            box-shadow: 0 10px 30px -17px #1D3354;
        }

        #join_button_container {
            width: 100%;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            float: left;
        }

        #join_button {
            width: 60%;
            height: 40px;
            font-family: 'Varela Round', sans-serif;
            font-size: 15px;
            font-weight: bold;
            text-align: center;
            color: #fff;
        }

        #chat_container {
            width: 100%;
            height: 450px;
            display: flex;
            justify-content: center;
            float: left;
            margin-top: 40px;
            animation: fadeIn 1s linear;
        }

        #chat_inner_container {
            width: 40%;
            height: 100%;
        }

        #chat_content_container {
            width: 100%;
            height: 90%;
            float: left;
            overflow-y: auto;
            font-family: 'Varela Round', sans-serif;
            padding-left: 15px;
            padding-right: 15px;
        }

        #chat_input_container {
            width: 100%;
            height: 10%;
            float: left;
            border-bottom: 2px dashed #1D3354;
            background-color: Transparent;
            padding-left: 15px;
            padding-right: 15px;
            font-family: 'Varela Round', sans-serif;
            margin-top: 10px;
        }

        #chat_input {
            width: 95%;
            height: 100%;
            float: left;
            background-color: Transparent;
            color: #1D3354;
            font-size: 15px;
        }

        #chat_input_send {
            width: 5%;
            height: 100%;
            float: left;
            font-size: 18px;
            background-color: Transparent;
            text-align: right;
            color: #ccc;
        }

        #chat_input_send.enabled {
            color: #D64045;
            background-color: Transparent;
            cursor: pointer;
        }

        #chat_logout_container {
            width: 100%;
            display: inline-block;
            display: flex;
            justify-content: center;
            align-items: center;
            float: left;
            margin-top: 20px;
        }

        #chat_logout {
            color: #D64045;
            cursor: pointer;
        }

        #chat_logout:hover {
            text-decoration: underline;
        }

        .message_container {
            width: 100%;
            display: inline-block;
            margin-bottom: 20px;
        }

        .message_inner_container {
            width: 100%;
            display: inline-block;
            color: #1D3354;
        }

        .message_user_container {
            width: 100%;
            display: inline-block;
        }

        .message_user {
            font-weight: bold;
            font-size: 14px;
        }

        .message_content_container {
            width: 100%;
            display: inline-block;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .message_content {
            font-weight: normal;
            font-size: 14px;
            margin-top: 5px;
        }

        .enabled {
            transition: background-color 0.5s;
            color: #fff;
            background-color: #D64045;
            cursor: pointer;
        }

        #title_container.chat_title_container {
            transition: 0.8s;
            transition-timing-function: ease-in-out;
            height: 100px;
        }

        #title.chat_title {
            transition: 0.8s;
            font-size: 47px;
        }

        .loader_container {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .loader {
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            border-top: 6px solid #D64045;
            border-bottom: 6px solid #1D3354;
            border-left: 6px solid #E9FFF9;
            border-right: 6px solid #E9FFF9;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        @keyframes blur {
            0% { filter: blur(5px); }
            100% { filter: blur(0); }
        }
    </style>
</head>
<body>
    <div id="title_container" class="chat_title_container">
        <div id="title_inner_container">
            <div id="title" class="chat_title">Class 12 T Chat</div>
        </div>
    </div>
    <div id="join_container">
        <div id="join_inner_container">
            <div id="join_input_container">
                <input type="text" id="join_input" placeholder="Enter your name" />
            </div>
            <div id="join_button_container">
                <button id="join_button" class="enabled">Join Chat</button>
            </div>
        </div>
    </div>
    <div id="chat_container" style="display: none;">
        <div id="chat_inner_container">
            <div id="chat_content_container"></div>
            <div id="chat_input_container">
                <input type="text" id="chat_input" placeholder="Type a message..." />
                <button id="chat_input_send" class="enabled">Send</button>
            </div>
            <div id="chat_logout_container">
                <span id="chat_logout">Logout</span>
            </div>
        </div>
    </div>
    <div class="loader_container" id="loader" style="display: none;">
        <div class="loader"></div>
    </div>
    <script>
        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDjgGk0y_drOYCyFkaZT16nkoT5QBQYXGk",
        authDomain: "elearning-5992f.firebaseapp.com",
        projectId: "elearning-5992f",
        storageBucket: "elearning-5992f.appspot.com",
        messagingSenderId: "4540204700",
        appId: "1:4540204700:web:d4eec9ccfe5a824a2dcf59",
        measurementId: "G-YZZKG47WFF"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const chatRef = database.ref('chats');

        document.getElementById('join_button').addEventListener('click', function() {
            const username = document.getElementById('join_input').value;
            if (username) {
                document.getElementById('join_container').style.display = 'none';
                document.getElementById('chat_container').style.display = 'block';
                loadMessages();
            }
        });

        document.getElementById('chat_input_send').addEventListener('click', function() {
            const message = document.getElementById('chat_input').value;
            const username = document.getElementById('join_input').value;
            if (message) {
                sendMessage(username, message);
                document.getElementById('chat_input').value = '';
            }
        });

        function sendMessage(username, message) {
            chatRef.push().set({
                user: username,
                text: message,
                timestamp: Date.now()
            });
        }

        function loadMessages() {
            chatRef.on('child_added', function(snapshot) {
                const messageData = snapshot.val();
                displayMessage(messageData.user, messageData.text);
            });
        }

        function displayMessage(user, text) {
            const messageContainer = document.createElement('div');
            messageContainer.classList.add('message_container');
            messageContainer.innerHTML = `
                <div class="message_inner_container">
                    <div class="message_user_container">
                        <span class="message_user">${user}</span>
                    </div>
                    <div class="message_content_container">
                        <span class="message_content">${text}</span>
                    </div>
                </div>
            `;
            document.getElementById('chat_content_container').appendChild(messageContainer);
            document.getElementById('chat_content_container').scrollTop = document.getElementById('chat_content_container').scrollHeight;
        }

        document.getElementById('chat_logout').addEventListener('click', function() {
            document.getElementById('join_container').style.display = 'flex';
            document.getElementById('chat_container').style.display = 'none';
            document.getElementById('chat_content_container').innerHTML = '';
        });
    </script>
</body>
</html>